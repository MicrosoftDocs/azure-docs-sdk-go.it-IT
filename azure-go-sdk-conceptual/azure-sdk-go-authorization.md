---
title: Autenticazione con Azure SDK per Go
description: Informazioni sui metodi di autenticazione disponibili in Azure SDK per Go e su come usarli.
services: azure
author: sptramer
ms.author: sttramer
manager: carmonm
ms.date: 09/05/2018
ms.topic: conceptual
ms.technology: azure-sdk-go
ms.devlang: go
ms.component: authentication
ms.openlocfilehash: f5c2c56e43828f0bedad0b5781dc71991ce1fd3e
ms.sourcegitcommit: 172f81dd6e4c6a275dc8031815aa87cdb488cbf0
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 09/26/2018
ms.locfileid: "47231676"
---
# <a name="authentication-methods-in-the-azure-sdk-for-go"></a><span data-ttu-id="5a411-103">Metodi di autenticazione in Azure SDK per Go</span><span class="sxs-lookup"><span data-stu-id="5a411-103">Authentication methods in the Azure SDK for Go</span></span>

<span data-ttu-id="5a411-104">Azure SDK per Go offre più modalità di autenticazione in Azure.</span><span class="sxs-lookup"><span data-stu-id="5a411-104">The Azure SDK for Go offers multiple ways to authenticate with Azure.</span></span> <span data-ttu-id="5a411-105">Questi _tipi_ di autenticazione vengono richiamati tramite diversi _metodi_ di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="5a411-105">These authentication _types_ are invoked through different authentication _methods_.</span></span> <span data-ttu-id="5a411-106">Questo articolo illustra i tipi e i metodi disponibili e mostra come scegliere l'approccio ottimale per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5a411-106">This article covers the available types, methods, and how to choose which are best for your application.</span></span>

## <a name="available-authentication-types-and-methods"></a><span data-ttu-id="5a411-107">Metodi e tipi di autenticazione disponibili</span><span class="sxs-lookup"><span data-stu-id="5a411-107">Available authentication types and methods</span></span>

<span data-ttu-id="5a411-108">Azure SDK per Go offre diversi tipi di autenticazione che usano set di credenziali diversi.</span><span class="sxs-lookup"><span data-stu-id="5a411-108">The Azure SDK for Go offers several different types of authentication, using different credentials sets.</span></span> <span data-ttu-id="5a411-109">Ogni tipo di autenticazione è disponibile tramite metodi di autenticazione diversi, ovvero secondo il modo in cui l'SDK riceve le credenziali come input.</span><span class="sxs-lookup"><span data-stu-id="5a411-109">Each authentication type is available through different authentication methods, which are how the SDK takes these credentials as input.</span></span> <span data-ttu-id="5a411-110">La tabella seguente descrive i tipi di autenticazione e le situazioni in cui sono consigliati per l'uso da parte dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5a411-110">The following table describes the available types of authentication and situations in which they're recommended for use by your application.</span></span>

| <span data-ttu-id="5a411-111">Tipo di autenticazione</span><span class="sxs-lookup"><span data-stu-id="5a411-111">Authentication type</span></span> | <span data-ttu-id="5a411-112">Consigliato quando...</span><span class="sxs-lookup"><span data-stu-id="5a411-112">Recommended when...</span></span> |
|---------------------|---------------------|
| <span data-ttu-id="5a411-113">Autenticazione basata su certificati</span><span class="sxs-lookup"><span data-stu-id="5a411-113">Certificate-based authentication</span></span> | <span data-ttu-id="5a411-114">È presente un certificato X509 configurato per un utente o un'entità servizio di Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="5a411-114">You have an X509 certificate that was configured for an Azure Active Directory (AAD) user or service principal.</span></span> <span data-ttu-id="5a411-115">Per altre informazioni, vedere [Introduzione all'autenticazione basata su certificati di Azure Active Directory].</span><span class="sxs-lookup"><span data-stu-id="5a411-115">To learn more, see [Get started with certificate-based authentication in Azure Active Directory].</span></span> |
| <span data-ttu-id="5a411-116">Credenziali del client</span><span class="sxs-lookup"><span data-stu-id="5a411-116">Client credentials</span></span> | <span data-ttu-id="5a411-117">Si dispone di un'entità servizio configurata per l'applicazione o una classe di applicazioni a cui questa appartiene.</span><span class="sxs-lookup"><span data-stu-id="5a411-117">You have a configured service principal that is set up for this application or a class of applications it belongs to.</span></span> <span data-ttu-id="5a411-118">Per altre informazioni, vedere [Creare un'entità servizio con l'interfaccia della riga di comando di Azure].</span><span class="sxs-lookup"><span data-stu-id="5a411-118">To learn more, see [Create a service principal with Azure CLI].</span></span> |
| <span data-ttu-id="5a411-119">Identità gestite per le risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="5a411-119">Managed identities for Azure resources</span></span> | <span data-ttu-id="5a411-120">L'applicazione viene eseguita in una risorsa di Azure che è stata configurata con un'identità gestita.</span><span class="sxs-lookup"><span data-stu-id="5a411-120">Your application is running on an Azure resource that has been configured with a managed identity.</span></span> <span data-ttu-id="5a411-121">Per altre informazioni, vedere l'articolo relativo alle [identità gestite per le risorse di Azure].</span><span class="sxs-lookup"><span data-stu-id="5a411-121">To learn more, see [Managed identities for Azure resources].</span></span> |
| <span data-ttu-id="5a411-122">Token dispositivo</span><span class="sxs-lookup"><span data-stu-id="5a411-122">Device token</span></span> | <span data-ttu-id="5a411-123">L'applicazione è stata progettata __solo__ per l'utilizzo interattivo.</span><span class="sxs-lookup"><span data-stu-id="5a411-123">Your application is meant to be used interactively __only__.</span></span> <span data-ttu-id="5a411-124">È possibile che l'utente abbia abilitato Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="5a411-124">Users may have multi-factor authentication enabled.</span></span> <span data-ttu-id="5a411-125">Gli utenti hanno accesso a un Web browser per eseguire l'accesso.</span><span class="sxs-lookup"><span data-stu-id="5a411-125">Users have access to a web browser to sign in.</span></span> <span data-ttu-id="5a411-126">Per altre informazioni, vedere [Uso dell'autenticazione tramite token dispositivo](#use-device-token-authentication).</span><span class="sxs-lookup"><span data-stu-id="5a411-126">For more information, see [Use device token authentication](#use-device-token-authentication).</span></span>|
| <span data-ttu-id="5a411-127">Nome utente/password</span><span class="sxs-lookup"><span data-stu-id="5a411-127">Username/password</span></span> | <span data-ttu-id="5a411-128">È disponibile un'applicazione interattiva che non può usare alcun altro metodo di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="5a411-128">You have an interactive application that can't use any other authentication method.</span></span> <span data-ttu-id="5a411-129">Gli utenti non hanno abilitato Multi-Factor Authentication per l'accesso ad AAD.</span><span class="sxs-lookup"><span data-stu-id="5a411-129">Your users don't have multi-factor authentication enabled for their AAD sign-in.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="5a411-130">Se si usa un tipo di autenticazione diverso dalle credenziali del client, l'applicazione deve essere registrata in Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5a411-130">If you use an authentication type other than client credentials, your application must be registered in Azure Active Directory.</span></span> <span data-ttu-id="5a411-131">Per altri dettagli, vedere [Integrazione di applicazioni con Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span><span class="sxs-lookup"><span data-stu-id="5a411-131">To learn how, see [Integrating applications with Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span></span>
>
> [!NOTE]
> <span data-ttu-id="5a411-132">A meno che non si abbiano esigenze particolari, evitare l'autenticazione con nome utente/password.</span><span class="sxs-lookup"><span data-stu-id="5a411-132">Unless you have special requirements, avoid username/password authentication.</span></span> <span data-ttu-id="5a411-133">Nelle situazioni in cui è opportuno eseguire l'accesso basato sull'utente è possibile usare l'autenticazione tramite token.</span><span class="sxs-lookup"><span data-stu-id="5a411-133">In situations where user-based sign in is appropriate, device token authentication can usually be used instead.</span></span>

[Introduzione all'autenticazione basata su certificati di Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Get started with certificate-based authentication in Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Creare un'entità servizio con l'interfaccia della riga di comando di Azure]: /cli/azure/create-an-azure-service-principal-azure-cli
[Create a service principal with Azure CLI]: /cli/azure/create-an-azure-service-principal-azure-cli
[Identità gestite per le risorse di Azure]: /azure/active-directory/managed-identities-azure-resources/overview
[Managed identities for Azure resources]: /azure/active-directory/managed-identities-azure-resources/overview

<span data-ttu-id="5a411-137">Questi tipi di autenticazione sono disponibili tramite metodi diversi.</span><span class="sxs-lookup"><span data-stu-id="5a411-137">These authentication types are available through different methods.</span></span>

* <span data-ttu-id="5a411-138">L'[_autenticazione basata su ambiente_](#use-environment-based-authentication) legge le credenziali direttamente dall'ambiente del programma.</span><span class="sxs-lookup"><span data-stu-id="5a411-138">[_Environment-based authentication_](#use-environment-based-authentication) reads credentials directly from the program's environment.</span></span>
* <span data-ttu-id="5a411-139">L'[_autenticazione basata su file_](#use-file-based-authentication) carica un file contenente le credenziali dell'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="5a411-139">[_File-based authentication_](#use-file-based-authentication) loads a file containing service principal credentials.</span></span>
* <span data-ttu-id="5a411-140">L'[_autenticazione basata su client_](#use-an-authentication-client) usa un oggetto nel codice e chiede all'utente di fornire le credenziali durante l'esecuzione del programma.</span><span class="sxs-lookup"><span data-stu-id="5a411-140">[_Client-based authentication_](#use-an-authentication-client) uses an object in code and makes you responsible for providing the credentials during program execution.</span></span>
* <span data-ttu-id="5a411-141">L'[_autenticazione tramite token dispositivo_](#use-device-token-authentication) richiede l'accesso interattivo degli utenti tramite un Web browser con un token.</span><span class="sxs-lookup"><span data-stu-id="5a411-141">[_Device token authentication_](#use-device-token-authentication) requires users to sign in interactively through a web browser with a token.</span></span>

<span data-ttu-id="5a411-142">Tutti i tipi e le funzioni di autenticazione sono disponibili nel pacchetto `github.com/Azure/go-autorest/autorest/azure/auth`.</span><span class="sxs-lookup"><span data-stu-id="5a411-142">All authentication functions and types are available in the `github.com/Azure/go-autorest/autorest/azure/auth` package.</span></span>

> [!NOTE]
> <span data-ttu-id="5a411-143">A meno che non si abbiano esigenze particolari, evitare l'autenticazione basata su client.</span><span class="sxs-lookup"><span data-stu-id="5a411-143">Unless you have special requirements, avoid client-based authentication.</span></span> <span data-ttu-id="5a411-144">Questo metodo di autenticazione incoraggia procedure non valide.</span><span class="sxs-lookup"><span data-stu-id="5a411-144">This method of authentication encourages bad practices.</span></span> <span data-ttu-id="5a411-145">In particolare, l'autenticazione basata su client spinge a impostare le credenziali come hardcoded.</span><span class="sxs-lookup"><span data-stu-id="5a411-145">In particular, using client-based authentication makes it tempting to hard-code credentials.</span></span> <span data-ttu-id="5a411-146">La scrittura di codici personalizzati per l'autenticazione potrà essere anche interrotta in versioni future di SDK qualora i requisiti di autenticazione cambino.</span><span class="sxs-lookup"><span data-stu-id="5a411-146">Writing custom code for authentication may also break under future SDK releases if authentication requirements change.</span></span>

## <a name="use-environment-based-authentication"></a><span data-ttu-id="5a411-147">Usare l'autenticazione basata su ambiente</span><span class="sxs-lookup"><span data-stu-id="5a411-147">Use environment-based authentication</span></span>

<span data-ttu-id="5a411-148">Se si esegue l'applicazione in un contesto controllato, l'autenticazione basata su ambiente è una scelta naturale.</span><span class="sxs-lookup"><span data-stu-id="5a411-148">If you're running your application in a controlled setting, environment-based authentication is a natural choice.</span></span> <span data-ttu-id="5a411-149">Con questo metodo di autenticazione è possibile configurare l'ambiente shell prima di eseguire l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5a411-149">With this authentication method, you configure the shell environment before running your application.</span></span> <span data-ttu-id="5a411-150">In fase di esecuzione Go SDK legge tali variabili di ambiente per l'autenticazione in Azure.</span><span class="sxs-lookup"><span data-stu-id="5a411-150">At runtime, the Go SDK reads these environment variables to authenticate with Azure.</span></span>

<span data-ttu-id="5a411-151">L'autenticazione basata su ambiente è supportata per tutti i metodi di autenticazione ad eccezione dei token dispositivo, valutati nell'ordine seguente:</span><span class="sxs-lookup"><span data-stu-id="5a411-151">Environment-based authentication has support for all authentication methods except device tokens, evaluated in the following order:</span></span>

* <span data-ttu-id="5a411-152">Credenziali del client</span><span class="sxs-lookup"><span data-stu-id="5a411-152">Client credentials</span></span>
* <span data-ttu-id="5a411-153">Certificati X509</span><span class="sxs-lookup"><span data-stu-id="5a411-153">X509 certificates</span></span>
* <span data-ttu-id="5a411-154">Nome utente/password</span><span class="sxs-lookup"><span data-stu-id="5a411-154">Username/password</span></span>
* <span data-ttu-id="5a411-155">Identità gestite per le risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="5a411-155">Managed identities for Azure resources</span></span>

<span data-ttu-id="5a411-156">Se un tipo di autenticazione ha valori non configurati o viene rifiutato, l'SDK prova automaticamente il tipo di autenticazione successivo.</span><span class="sxs-lookup"><span data-stu-id="5a411-156">If an authentication type has unset values or is refused, the SDK automatically tries the next authentication type.</span></span> <span data-ttu-id="5a411-157">Quando non sono disponibili altri tipi, l'SDK restituisce un errore.</span><span class="sxs-lookup"><span data-stu-id="5a411-157">When no more types are available to try, the SDK returns an error.</span></span>

<span data-ttu-id="5a411-158">La tabella seguente illustra in dettaglio le variabili di ambiente che devono essere impostate per ogni tipo di autenticazione supportato dall'autenticazione basata su ambiente.</span><span class="sxs-lookup"><span data-stu-id="5a411-158">The following table details the environment variables that need to be set for each authentication type supported by environment-based authentication.</span></span>

| <span data-ttu-id="5a411-159">Tipo di autenticazione</span><span class="sxs-lookup"><span data-stu-id="5a411-159">Authentication type</span></span> | <span data-ttu-id="5a411-160">Variabile di ambiente</span><span class="sxs-lookup"><span data-stu-id="5a411-160">Environment variable</span></span> | <span data-ttu-id="5a411-161">DESCRIZIONE</span><span class="sxs-lookup"><span data-stu-id="5a411-161">Description</span></span> |
| ------------------- | -------------------- | ----------- |
| <span data-ttu-id="5a411-162">__Credenziali del client__</span><span class="sxs-lookup"><span data-stu-id="5a411-162">__Client credentials__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="5a411-163">ID del tenant di Active Directory a cui appartiene l'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="5a411-163">The ID for the Active Directory tenant that the service principal belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="5a411-164">Nome o ID dell'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="5a411-164">The name or ID of the service principal.</span></span> |
| | `AZURE_CLIENT_SECRET` | <span data-ttu-id="5a411-165">Segreto associato all'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="5a411-165">The secret associated with the service principal.</span></span> |
| <span data-ttu-id="5a411-166">__Certificate__</span><span class="sxs-lookup"><span data-stu-id="5a411-166">__Certificate__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="5a411-167">ID del tenant di Active Directory che viene registrato con il certificato.</span><span class="sxs-lookup"><span data-stu-id="5a411-167">The ID for the Active Directory tenant that the certificate is registered with.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="5a411-168">ID client dell'applicazione associato al certificato.</span><span class="sxs-lookup"><span data-stu-id="5a411-168">The application client ID associated with the certificate.</span></span> |
| | `AZURE_CERTIFICATE_PATH` | <span data-ttu-id="5a411-169">Percorso del file di certificato client.</span><span class="sxs-lookup"><span data-stu-id="5a411-169">The path to the client certificate file.</span></span> |
| | `AZURE_CERTIFICATE_PASSWORD` | <span data-ttu-id="5a411-170">Password del certificato client.</span><span class="sxs-lookup"><span data-stu-id="5a411-170">The password for the client certificate.</span></span> |
| <span data-ttu-id="5a411-171">__Nome utente/password__</span><span class="sxs-lookup"><span data-stu-id="5a411-171">__Username/Password__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="5a411-172">ID del tenant di Active Directory a cui appartiene l'utente.</span><span class="sxs-lookup"><span data-stu-id="5a411-172">The ID for the Active Directory tenant that the user belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="5a411-173">ID client dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5a411-173">The application client ID.</span></span> |
| | `AZURE_USERNAME` | <span data-ttu-id="5a411-174">Nome utente con cui accedere.</span><span class="sxs-lookup"><span data-stu-id="5a411-174">The username to sign in with.</span></span> |
| | `AZURE_PASSWORD` | <span data-ttu-id="5a411-175">Password con cui accedere.</span><span class="sxs-lookup"><span data-stu-id="5a411-175">The password to sign in with.</span></span> |
| <span data-ttu-id="5a411-176">__Identità gestita__</span><span class="sxs-lookup"><span data-stu-id="5a411-176">__Managed identity__</span></span> | | <span data-ttu-id="5a411-177">Non sono necessarie credenziali per l'autenticazione con identità gestita.</span><span class="sxs-lookup"><span data-stu-id="5a411-177">No credentials are needed for managed identity authentication.</span></span> <span data-ttu-id="5a411-178">L'applicazione deve essere eseguita in una risorsa di Azure configurata per l'uso delle identità gestite.</span><span class="sxs-lookup"><span data-stu-id="5a411-178">The application must be running on an Azure resource configured to use managed identities.</span></span> <span data-ttu-id="5a411-179">Per informazioni dettagliate, vedere l'articolo relativo alle [identità gestite per le risorse di Azure].</span><span class="sxs-lookup"><span data-stu-id="5a411-179">For details, see [Managed identities for Azure resources].</span></span> |

<span data-ttu-id="5a411-180">Per connettersi a un endpoint di gestione o cloud diverso dal cloud pubblico di Azure, impostare anche le variabili di ambiente seguenti.</span><span class="sxs-lookup"><span data-stu-id="5a411-180">To connect to a cloud or management endpoint other than the default Azure public cloud, set the following environment variables.</span></span> <span data-ttu-id="5a411-181">I motivi più comuni per impostarle includono l'uso di Azure Stack, un cloud in un'area geografica diversa o il modello di distribuzione classica.</span><span class="sxs-lookup"><span data-stu-id="5a411-181">The most common reasons are if you use Azure Stack, a cloud in a different geographic region, or the classic deployment model.</span></span>

| <span data-ttu-id="5a411-182">Variabile di ambiente</span><span class="sxs-lookup"><span data-stu-id="5a411-182">Environment variable</span></span> | <span data-ttu-id="5a411-183">DESCRIZIONE</span><span class="sxs-lookup"><span data-stu-id="5a411-183">Description</span></span>  |
|----------------------|--------------|
| `AZURE_ENVIRONMENT` | <span data-ttu-id="5a411-184">Nome dell'ambiente cloud a cui connettersi.</span><span class="sxs-lookup"><span data-stu-id="5a411-184">The name of the cloud environment to connect to.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="5a411-185">ID di risorsa di Active Directory da usare durante la connessione, come URI per l'endpoint di gestione.</span><span class="sxs-lookup"><span data-stu-id="5a411-185">The Active Directory resource ID to use when connecting, as a URI to your management endpoint.</span></span> |

<span data-ttu-id="5a411-186">Quando si usa l'autenticazione basata su ambiente, chiamare la funzione [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) per ottenere l'oggetto provider di autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="5a411-186">When using environment-based authentication, call the [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) function to get your authorizer object.</span></span> <span data-ttu-id="5a411-187">Questo oggetto viene quindi impostato sulla proprietà `Authorizer` dei client per consentire loro l'accesso ad Azure.</span><span class="sxs-lookup"><span data-stu-id="5a411-187">This object is then set on the `Authorizer` property of clients to allow them access to Azure.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := auth.NewAuthorizerFromEnvironment()
```

### <a name="authentication-on-azure-stack"></a><span data-ttu-id="5a411-188">Autenticazione in Azure Stack</span><span class="sxs-lookup"><span data-stu-id="5a411-188">Authentication on Azure Stack</span></span>

<span data-ttu-id="5a411-189">Per autenticarsi in Azure Stack, è necessario impostare le variabili seguenti:</span><span class="sxs-lookup"><span data-stu-id="5a411-189">To authenticate on Azure Stack, you need to set the following variables:</span></span>

| <span data-ttu-id="5a411-190">Variabile di ambiente</span><span class="sxs-lookup"><span data-stu-id="5a411-190">Environment variable</span></span> | <span data-ttu-id="5a411-191">DESCRIZIONE</span><span class="sxs-lookup"><span data-stu-id="5a411-191">Description</span></span>  |
|----------------------|--------------|
| `AZURE_AD_ENDPOINT` | <span data-ttu-id="5a411-192">Endpoint di Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5a411-192">The Active Directory endpoint.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="5a411-193">ID risorsa di Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5a411-193">The Active Directory resource ID.</span></span> |

<span data-ttu-id="5a411-194">Queste variabili possono essere recuperate dalle informazioni sui metadati di Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="5a411-194">These variables can be retrieved from Azure Stack metadata information.</span></span> <span data-ttu-id="5a411-195">Per recuperare i metadati, aprire un Web browser nel proprio ambiente di Azure Stack e utilizzare l'URL: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`</span><span class="sxs-lookup"><span data-stu-id="5a411-195">To retrieve the metadata, open a web browser in your Azure Stack environment and use the url: `(ResourceManagerURL)/metadata/endpoints?api-version=1.0`</span></span>

<span data-ttu-id="5a411-196">`ResourceManagerURL` varia in base al nome dell'area, al nome del computer e al nome di dominio completo esterno (FQDN) della distribuzione di Azure Stack:</span><span class="sxs-lookup"><span data-stu-id="5a411-196">The `ResourceManagerURL` varies based on the region name, machine name, and external fully qualified domain name (FQDN) of your Azure Stack deployment:</span></span>

| <span data-ttu-id="5a411-197">Environment</span><span class="sxs-lookup"><span data-stu-id="5a411-197">Environment</span></span> | <span data-ttu-id="5a411-198">ResourceManagerURL</span><span class="sxs-lookup"><span data-stu-id="5a411-198">ResourceManagerURL</span></span> |
|----------------------|--------------|
| <span data-ttu-id="5a411-199">Kit di sviluppo</span><span class="sxs-lookup"><span data-stu-id="5a411-199">Development Kit</span></span> | `https://management.local.azurestack.external/` |
| <span data-ttu-id="5a411-200">Sistemi integrati</span><span class="sxs-lookup"><span data-stu-id="5a411-200">Integrated Systems</span></span> | `https://management.(region).ext-(machine-name).(FQDN)` |

<span data-ttu-id="5a411-201">Per altre informazioni su come usare Azure SDK per Go in Azure Stack, vedere [Usare profili di versioni delle API con Go in Azure Stack](https://docs.microsoft.com/azure/azure-stack/user/azure-stack-version-profiles-go)</span><span class="sxs-lookup"><span data-stu-id="5a411-201">For more information on how to use the Azure SDK for Go on Azure Stack, see [Use API version profiles with Go in Azure Stack](https://docs.microsoft.com/azure/azure-stack/user/azure-stack-version-profiles-go)</span></span>

## <a name="use-file-based-authentication"></a><span data-ttu-id="5a411-202">Usare l'autenticazione basata su file</span><span class="sxs-lookup"><span data-stu-id="5a411-202">Use file-based authentication</span></span>

<span data-ttu-id="5a411-203">L'autenticazione basata su file usa un formato di file generato dall'[interfaccia della riga di comando di Azure](/cli/azure).</span><span class="sxs-lookup"><span data-stu-id="5a411-203">File-based authentication uses a file format generated by [the Azure CLI](/cli/azure).</span></span> <span data-ttu-id="5a411-204">È possibile creare facilmente questo file quando si crea una nuova entità servizio con il parametro `--sdk-auth`.</span><span class="sxs-lookup"><span data-stu-id="5a411-204">You can easily create this file when creating a new service principal with the `--sdk-auth` parameter.</span></span> <span data-ttu-id="5a411-205">Se si intende usare l'autenticazione basata su file, assicurarsi che questo argomento venga fornito quando si crea un'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="5a411-205">If you plan on using file-based authentication, make sure that this argument is provided when creating a service principal.</span></span> <span data-ttu-id="5a411-206">Poiché l'interfaccia della riga di comando stampa l'output in `stdout`, reindirizzare l'output verso un file.</span><span class="sxs-lookup"><span data-stu-id="5a411-206">Since the CLI prints output to `stdout`, redirect output to a file.</span></span>

```azurecli
az ad sp create-for-rbac --sdk-auth > azure.auth
```

<span data-ttu-id="5a411-207">Impostare la variabile di ambiente `AZURE_AUTH_LOCATION` in cui si trova il file di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="5a411-207">Set the `AZURE_AUTH_LOCATION` environment variable to where the authorization file is located.</span></span> <span data-ttu-id="5a411-208">Questa variabile di ambiente viene letta dall'applicazione e le credenziali contenute in essa vengono analizzate.</span><span class="sxs-lookup"><span data-stu-id="5a411-208">This environment variable is read by the application, and the credentials within it are parsed.</span></span> <span data-ttu-id="5a411-209">Se è necessario selezionare il file di autorizzazione in fase di runtime, modificare l'ambiente del programma tramite la funzione [os.Setenv](https://golang.org/pkg/os/#Setenv).</span><span class="sxs-lookup"><span data-stu-id="5a411-209">If you need to select the authorization file at runtime, manipulate the program's environment using the [os.Setenv](https://golang.org/pkg/os/#Setenv) function.</span></span>

<span data-ttu-id="5a411-210">Per caricare le informazioni di autenticazione, chiamare la funzione [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile).</span><span class="sxs-lookup"><span data-stu-id="5a411-210">To load the authentication information, call the [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile) function.</span></span> <span data-ttu-id="5a411-211">A differenza dell'autorizzazione basata su ambiente, l'autorizzazione basata su file richiede un endpoint di risorse.</span><span class="sxs-lookup"><span data-stu-id="5a411-211">Unlike environment-based authorization, file-based authorization requires a resource endpoint.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := NewAuthorizerFromFile(azure.PublicCloud.ResourceManagerEndpoint)
```

<span data-ttu-id="5a411-212">Per altre informazioni sull'uso delle entità servizio e sulla gestione delle relative autorizzazioni di accesso, vedere [Creare un'entità servizio con l'interfaccia della riga di comando di Azure].</span><span class="sxs-lookup"><span data-stu-id="5a411-212">For more on using service principals and managing their access permissions, see [Create a service principal with Azure CLI].</span></span>

## <a name="use-device-token-authentication"></a><span data-ttu-id="5a411-213">Uso dell'autenticazione tramite token dispositivo</span><span class="sxs-lookup"><span data-stu-id="5a411-213">Use device token authentication</span></span>

<span data-ttu-id="5a411-214">Se si vuole che gli utenti accedano in modo interattivo, l'autenticazione tramite token dispositivo è l'approccio ottimale.</span><span class="sxs-lookup"><span data-stu-id="5a411-214">If you want users to sign in interactively, the best way is through device token authentication.</span></span> <span data-ttu-id="5a411-215">Questo flusso di autenticazione fornisce all'utente un token da incollare in un sito di accesso di Microsoft, in cui l'utente può quindi autenticarsi con un account di Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="5a411-215">This authentication flow passes the user a token to paste into a Microsoft sign-in site, where they then authenticate with an Azure Active Directory (AAD) account.</span></span> <span data-ttu-id="5a411-216">Questo metodo di autenticazione supporta gli account con autenticazione a più fattori abilitata, a differenza dell'autenticazione standard tramite nome utente/password.</span><span class="sxs-lookup"><span data-stu-id="5a411-216">This authentication method supports accounts that have multi-factor authentication enabled, unlike standard username/password authentication.</span></span>

<span data-ttu-id="5a411-217">Per usare l'autenticazione tramite token dispositivo, creare un provider di autorizzazioni [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) con la funzione [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig).</span><span class="sxs-lookup"><span data-stu-id="5a411-217">To use device token authentication, create a [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) authorizer with the [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) function.</span></span> <span data-ttu-id="5a411-218">Chiamare il [provider di autorizzazioni](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) nell'oggetto risultante per avviare il processo di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="5a411-218">Call [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) on the resulting object to start the authentication process.</span></span> <span data-ttu-id="5a411-219">L'autenticazione tramite flusso del dispositivo blocca l'esecuzione del programma fino a quando non è stato completato l'intero flusso di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="5a411-219">Device flow authentication blocks program execution until the whole authentication flow is complete.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
deviceConfig := auth.NewDeviceFlowConfig(applicationID, tenantID)
authorizer, err := deviceConfig.Authorizer()
```

## <a name="use-an-authentication-client"></a><span data-ttu-id="5a411-220">Usare un client di autenticazione</span><span class="sxs-lookup"><span data-stu-id="5a411-220">Use an authentication client</span></span>

<span data-ttu-id="5a411-221">Se è necessario un tipo di autenticazione specifico e si è disposti a far eseguire al programma il caricamento delle informazioni di autenticazione da parte dell'utente, è possibile usare qualsiasi client conforme all'interfaccia [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig).</span><span class="sxs-lookup"><span data-stu-id="5a411-221">If you require a specific type of authentication and are willing to have your program do the work to load authentication information from the user, you can use any client that conforms to the [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig) interface.</span></span> <span data-ttu-id="5a411-222">Usare un tipo che implementa questa interfaccia nelle situazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="5a411-222">Use a type that implements this interface when you:</span></span>

* <span data-ttu-id="5a411-223">Scrittura di un programma interattivo</span><span class="sxs-lookup"><span data-stu-id="5a411-223">Write an interactive program</span></span>
* <span data-ttu-id="5a411-224">Uso di file di configurazione specializzati</span><span class="sxs-lookup"><span data-stu-id="5a411-224">Use specialized configuration files</span></span>
* <span data-ttu-id="5a411-225">Presenza di un requisito che impedisce l'uso di un metodo di autenticazione predefinito</span><span class="sxs-lookup"><span data-stu-id="5a411-225">Have a requirement that prevents using a built-in authentication method</span></span>

> [!WARNING]
> <span data-ttu-id="5a411-226">Mai impostare come hardcoded le credenziali di Azure in un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="5a411-226">Never hard-code Azure credentials into an application.</span></span> <span data-ttu-id="5a411-227">L'inserimento di informazioni riservate in un file binario dell'applicazione rende più semplice per un utente malintenzionato estrarle, indipendentemente dal fatto che l'applicazione sia in esecuzione o meno.</span><span class="sxs-lookup"><span data-stu-id="5a411-227">Putting secrets into an application binary makes it easier for an attacker to extract them, whether the application is running or not.</span></span> <span data-ttu-id="5a411-228">In questo modo vengono messe a rischio tutte le risorse di Azure per cui sono autorizzate le credenziali!</span><span class="sxs-lookup"><span data-stu-id="5a411-228">This puts all Azure resources the credentials are authorized for at risk!</span></span>

<span data-ttu-id="5a411-229">Nella tabella seguente sono elencati i tipi conformi all'interfaccia `AuthorizerConfig` nell'SDK.</span><span class="sxs-lookup"><span data-stu-id="5a411-229">The following table lists the types in the SDK that conform to the `AuthorizerConfig` interface.</span></span>

| <span data-ttu-id="5a411-230">Tipo di autenticazione</span><span class="sxs-lookup"><span data-stu-id="5a411-230">Authentication type</span></span> | <span data-ttu-id="5a411-231">Tipo di provider di autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="5a411-231">Authorizer type</span></span> |
|---------------------|-----------------------|
| <span data-ttu-id="5a411-232">Autenticazione basata su certificati</span><span class="sxs-lookup"><span data-stu-id="5a411-232">Certificate-based authentication</span></span> | <span data-ttu-id="5a411-233">[ClientCertificateConfig]</span><span class="sxs-lookup"><span data-stu-id="5a411-233">[ClientCertificateConfig]</span></span> |
| <span data-ttu-id="5a411-234">Credenziali del client</span><span class="sxs-lookup"><span data-stu-id="5a411-234">Client credentials</span></span> | <span data-ttu-id="5a411-235">[ClientCredentialsConfig]</span><span class="sxs-lookup"><span data-stu-id="5a411-235">[ClientCredentialsConfig]</span></span> |
| <span data-ttu-id="5a411-236">Identità gestite per le risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="5a411-236">Managed identities for Azure resources</span></span> | <span data-ttu-id="5a411-237">[MSIConfig]</span><span class="sxs-lookup"><span data-stu-id="5a411-237">[MSIConfig]</span></span> |
| <span data-ttu-id="5a411-238">Nome utente/password</span><span class="sxs-lookup"><span data-stu-id="5a411-238">Username/password</span></span> | <span data-ttu-id="5a411-239">[UsernamePasswordConfig]</span><span class="sxs-lookup"><span data-stu-id="5a411-239">[UsernamePasswordConfig]</span></span> |

[ClientCertificateConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCertificateConfig
[ClientCredentialsConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCredentialsConfig
[MSIConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#MSIConfig
[DeviceFlowConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig
[UsernamePasswordConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#UsernamePasswordConfig

<span data-ttu-id="5a411-244">Creare un autenticatore con la rispettiva funzione `New` associata e quindi chiamare `Authorize` nell'oggetto risultante per eseguire l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="5a411-244">Create an authenticator with its associated `New` function, and then call `Authorize` on the resulting object to authenticate.</span></span> <span data-ttu-id="5a411-245">Ad esempio, per usare l'autenticazione basata su certificati:</span><span class="sxs-lookup"><span data-stu-id="5a411-245">For example, to use certificate-based authentication:</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
certificateAuthorizer := auth.NewClientCertificateConfig(certificatePath, certificatePassword, clientID, tenantID)
authorizerToken, err := certificateAuthorizer.Authorize()
```
