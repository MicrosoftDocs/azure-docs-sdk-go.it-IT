---
title: Autenticazione con Azure SDK per Go
description: Informazioni sui metodi di autenticazione disponibili in Azure SDK per Go e su come usarli.
services: azure
author: sptramer
ms.author: sttramer
ms.date: 04/03/2018
ms.topic: article
ms.service: azure
ms.devlang: go
manager: carmonm
ms.openlocfilehash: 39f9dc5a7cdf9ab84cfd9264446bacb31392ca80
ms.sourcegitcommit: 59d2b4c9d8da15fbbd15e36551093219fdaf256e
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 04/18/2018
---
# <a name="authentication-methods-in-the-azure-sdk-for-go"></a><span data-ttu-id="6d553-103">Metodi di autenticazione in Azure SDK per Go</span><span class="sxs-lookup"><span data-stu-id="6d553-103">Authentication methods in the Azure SDK for Go</span></span>

<span data-ttu-id="6d553-104">Azure SDK per Go offre una varietà di tipi e metodi di autenticazione utilizzabili dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6d553-104">The Azure SDK for Go offers a variety of authentication types and methods that your application can use.</span></span> <span data-ttu-id="6d553-105">I metodi di autenticazione supportati variano dal pull di informazioni da variabili di ambiente all'autenticazione interattiva basata su Web.</span><span class="sxs-lookup"><span data-stu-id="6d553-105">Supported authentication methods range from pulling information from environment variables to interactive web-based authentication.</span></span> <span data-ttu-id="6d553-106">Questo articolo illustra i tipi di autenticazione disponibili nell'SDK e i metodi per usarli,</span><span class="sxs-lookup"><span data-stu-id="6d553-106">This article introduces you to the available types of authentication in the SDK, and the methods for using them.</span></span> <span data-ttu-id="6d553-107">oltre a presentare le procedure consigliate per la selezione del tipo di autenticazione adatto all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6d553-107">You'll also learn best practices for selecting which authentication type is right for your application.</span></span>

## <a name="available-authentication-types-and-methods"></a><span data-ttu-id="6d553-108">Metodi e tipi di autenticazione disponibili</span><span class="sxs-lookup"><span data-stu-id="6d553-108">Available authentication types and methods</span></span>

<span data-ttu-id="6d553-109">Azure SDK per Go offre diversi tipi di autenticazione che usano set di credenziali diversi.</span><span class="sxs-lookup"><span data-stu-id="6d553-109">The Azure SDK for Go offers several different types of authentication, using different credentials sets.</span></span> <span data-ttu-id="6d553-110">Ognuno di questi tipi di autenticazione è disponibile tramite metodi di autenticazione diversi, ovvero secondo il modo in cui l'SDK riceve le credenziali come input.</span><span class="sxs-lookup"><span data-stu-id="6d553-110">Each of these authentication types are available through different authentication methods, which are how the SDK takes these credentials as input.</span></span> <span data-ttu-id="6d553-111">La tabella seguente descrive i tipi di autenticazione e le situazioni in cui sono consigliati per l'uso da parte dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6d553-111">The following table describes the available types of authentication and situations in which they're recommended for use by your application.</span></span>

| <span data-ttu-id="6d553-112">Tipo di autenticazione</span><span class="sxs-lookup"><span data-stu-id="6d553-112">Authentication type</span></span> | <span data-ttu-id="6d553-113">Consigliato quando...</span><span class="sxs-lookup"><span data-stu-id="6d553-113">Recommended when...</span></span> |
|---------------------|---------------------|
| <span data-ttu-id="6d553-114">Autenticazione basata su certificati</span><span class="sxs-lookup"><span data-stu-id="6d553-114">Certificate-based authentication</span></span> | <span data-ttu-id="6d553-115">È presente un certificato X509 configurato per un utente o un'entità servizio di Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="6d553-115">You have an X509 certificate that was configured for an Azure Active Directory (AAD) user or service principal.</span></span> <span data-ttu-id="6d553-116">Per altre informazioni, vedere [Introduzione all'autenticazione basata su certificati di Azure Active Directory].</span><span class="sxs-lookup"><span data-stu-id="6d553-116">To learn more, see [Get started with certificate-based authentication in Azure Active Directory].</span></span> |
| <span data-ttu-id="6d553-117">Credenziali del client</span><span class="sxs-lookup"><span data-stu-id="6d553-117">Client credentials</span></span> | <span data-ttu-id="6d553-118">Si dispone di un'entità servizio configurata per l'applicazione o una classe di applicazioni a cui questa appartiene.</span><span class="sxs-lookup"><span data-stu-id="6d553-118">You have a configured service principal that is set up for this application or a class of applications it belongs to.</span></span> <span data-ttu-id="6d553-119">Per altre informazioni, vedere [Creare un'entità servizio con l'interfaccia della riga di comando di Azure 2.0].</span><span class="sxs-lookup"><span data-stu-id="6d553-119">To learn more, see [Create a service principal with Azure CLI 2.0].</span></span> |
| <span data-ttu-id="6d553-120">Identità del servizio gestito</span><span class="sxs-lookup"><span data-stu-id="6d553-120">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="6d553-121">L'applicazione viene eseguita su una risorsa di Azure che è stata configurata con l'identità del servizio gestito.</span><span class="sxs-lookup"><span data-stu-id="6d553-121">Your application is running on an Azure resource that has been configured with Managed Service Identity (MSI).</span></span> <span data-ttu-id="6d553-122">Per altre informazioni, vedere [Identità del servizio gestito per le risorse di Azure].</span><span class="sxs-lookup"><span data-stu-id="6d553-122">To learn more, see [Managed Service Identity (MSI) for Azure resources].</span></span> |
| <span data-ttu-id="6d553-123">Token dispositivo</span><span class="sxs-lookup"><span data-stu-id="6d553-123">Device token</span></span> | <span data-ttu-id="6d553-124">L'applicazione deve essere usata __soltanto__ in modo interattivo e disporrà di una varietà di utenti, potenzialmente da più tenant AAD.</span><span class="sxs-lookup"><span data-stu-id="6d553-124">Your application is meant to be used interactively __only__ and will have a variety of users, potentially from multiple AAD tenants.</span></span> <span data-ttu-id="6d553-125">Gli utenti hanno accesso a un browser Web per eseguire l'accesso.</span><span class="sxs-lookup"><span data-stu-id="6d553-125">Users have access to a web browser to log in.</span></span> <span data-ttu-id="6d553-126">Per altre informazioni, vedere [Uso dell'autenticazione tramite token dispositivo](#use-device-token-authentication).</span><span class="sxs-lookup"><span data-stu-id="6d553-126">For more information, see [Use device token authentication](#use-device-token-authentication).</span></span>|
| <span data-ttu-id="6d553-127">Nome utente/password</span><span class="sxs-lookup"><span data-stu-id="6d553-127">Username/password</span></span> | <span data-ttu-id="6d553-128">Si dispone di un'applicazione interattiva che non può usare alcun altro metodo di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="6d553-128">You have an interactive application that cannot use any other authentication method.</span></span> <span data-ttu-id="6d553-129">Gli utenti non dispongono dell'autenticazione a più fattori abilitata per i relativi account di accesso ad Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6d553-129">Your users do not have multi-factor authentication enabled for their AAD login.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="6d553-130">Se si usa un tipo di autenticazione diverso dalle credenziali del client, l'applicazione deve essere registrata in Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6d553-130">If you use an authentication type other than client credentials, your application must be registered in Azure Active Directory.</span></span> <span data-ttu-id="6d553-131">Per altri dettagli, vedere [Integrazione di applicazioni con Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span><span class="sxs-lookup"><span data-stu-id="6d553-131">To learn how, see [Integrating applications with Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span></span>

> [!NOTE]
> <span data-ttu-id="6d553-132">A meno che non si abbiano esigenze particolari, evitare l'autenticazione con nome utente/password.</span><span class="sxs-lookup"><span data-stu-id="6d553-132">Unless you have special requirements, avoid username/password authentication.</span></span> <span data-ttu-id="6d553-133">L'autenticazione tramite token dispositivo può essere usata nelle situazioni in cui è opportuno eseguire l'accesso basato sull'utente.</span><span class="sxs-lookup"><span data-stu-id="6d553-133">In situations where user-based login is appropriate, device token authentication can usually be used instead.</span></span>

[Introduzione all'autenticazione basata su certificati di Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Get started with certificate-based authentication in Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Creare un'entità servizio con l'interfaccia della riga di comando di Azure 2.0]: /cli/azure/create-an-azure-service-principal-azure-cli
[Create a service principal with Azure CLI 2.0]: /cli/azure/create-an-azure-service-principal-azure-cli
[Identità del servizio gestito per le risorse di Azure]: /azure/active-directory/managed-service-identity/overview
[Managed Service Identity (MSI) for Azure resources]: /azure/active-directory/managed-service-identity/overview

<span data-ttu-id="6d553-137">Questi tipi di autenticazione sono disponibili tramite metodi diversi.</span><span class="sxs-lookup"><span data-stu-id="6d553-137">These authentication types are available through different methods.</span></span> <span data-ttu-id="6d553-138">L'[_autenticazione basata su ambiente_](#use-environment-based-authentication) legge le credenziali direttamente dall'ambiente del programma.</span><span class="sxs-lookup"><span data-stu-id="6d553-138">[_Environment-based authentication_](#use-environment-based-authentication) reads credentials directly from the program's environment.</span></span> <span data-ttu-id="6d553-139">L'[_autenticazione basata su file_](#use-file-based-authentication) carica un file contenente le credenziali dell'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="6d553-139">[_File-based authentication_](#use-file-based-authentication) loads a file containing service principal credentials.</span></span> <span data-ttu-id="6d553-140">L'[_autenticazione basata su client_](#use-an-authentication-client) usa un oggetto nel codice Go e chiede all'utente di fornire le credenziali durante l'esecuzione del programma.</span><span class="sxs-lookup"><span data-stu-id="6d553-140">[_Client-based authentication_](#use-an-authentication-client) uses an object in Go code and makes you responsible for providing the credentials during program execution.</span></span> <span data-ttu-id="6d553-141">Infine, [_l'autenticazione tramite token dispositivo_ ](#use-device-token-authentication) richiede agli utenti di accedere in modo interattivo con un token tramite un browser Web e non può essere usata assieme all'autenticazione basata su file o ambiente.</span><span class="sxs-lookup"><span data-stu-id="6d553-141">Finally, [_Device token authentication_](#use-device-token-authentication) requires users to log in interactively through a web browser with a token, and cannot be used with environment- or file-based authentication.</span></span>

<span data-ttu-id="6d553-142">Tutti i tipi e le funzioni di autenticazione sono disponibili nel pacchetto `github.com/Azure/go-autorest/autorest/azure/auth`.</span><span class="sxs-lookup"><span data-stu-id="6d553-142">All authentication functions and types are available in the `github.com/Azure/go-autorest/autorest/azure/auth` package.</span></span>

> [!NOTE]
> <span data-ttu-id="6d553-143">A meno che non si abbiano esigenze particolari, evitare l'autenticazione basata su client.</span><span class="sxs-lookup"><span data-stu-id="6d553-143">Unless you have special requirements, avoid client-based authentication.</span></span> <span data-ttu-id="6d553-144">Questo metodo di autenticazione incoraggia procedure non valide.</span><span class="sxs-lookup"><span data-stu-id="6d553-144">This method of authentication encourages bad practices.</span></span> <span data-ttu-id="6d553-145">In particolare, l'autenticazione basata su client spinge a impostare le credenziali come hardcoded.</span><span class="sxs-lookup"><span data-stu-id="6d553-145">In particular, using client-based authentication makes it tempting to hard-code credentials.</span></span> <span data-ttu-id="6d553-146">La scrittura di codici personalizzati per l'autenticazione potrà essere anche interrotta in versioni future di SDK qualora i requisiti di autenticazione cambino.</span><span class="sxs-lookup"><span data-stu-id="6d553-146">Writing custom code for authentication may also break under future SDK releases if authentication requirements change.</span></span>

## <a name="use-environment-based-authentication"></a><span data-ttu-id="6d553-147">Usare l'autenticazione basata su ambiente</span><span class="sxs-lookup"><span data-stu-id="6d553-147">Use environment-based authentication</span></span>

<span data-ttu-id="6d553-148">Se si esegue l'applicazione in un ambiente rigorosamente controllato, ad esempio in un contenitore, l'autenticazione basata su ambiente è una scelta naturale.</span><span class="sxs-lookup"><span data-stu-id="6d553-148">If you're running your application in a tightly controlled environment such as in a container, environment-based authentication is a natural choice.</span></span> <span data-ttu-id="6d553-149">Configurare l'ambiente shell prima di eseguire l'applicazione e prima che Go SDK legga queste variabili di ambiente in fase di runtime per l'autenticazione con Azure.</span><span class="sxs-lookup"><span data-stu-id="6d553-149">You configure the shell environment before running your application and the Go SDK reads these environment variables at runtime to authenticate with Azure.</span></span> 

<span data-ttu-id="6d553-150">L'autenticazione basata su ambiente è supportata per tutti i metodi di autenticazione ad eccezione dei token dispositivo, valutati nell'ordine seguente: credenziali client, certificati, nome utente/password e identità del servizio gestito.</span><span class="sxs-lookup"><span data-stu-id="6d553-150">Environment-based authentication has support for all authentication methods except device tokens, evaluated in the following order: Client credentials, certificates, username/password, and Managed Service Identity (MSI).</span></span> <span data-ttu-id="6d553-151">Se non è impostata una variabile di ambiente necessaria o l'SDK riceve un rifiuto dal servizio di autenticazione, viene eseguito un tentativo con il tipo di autenticazione successivo.</span><span class="sxs-lookup"><span data-stu-id="6d553-151">If a required environment variable is unset or the SDK gets a refusal from the authentication service, the next authentication type is tried.</span></span> <span data-ttu-id="6d553-152">Se l'SDK non è in grado di eseguire l'autenticazione dall'ambiente, viene restituito un errore.</span><span class="sxs-lookup"><span data-stu-id="6d553-152">If the SDK cannot authenticate from the environment, it returns an error.</span></span>

<span data-ttu-id="6d553-153">La tabella seguente illustra in dettaglio le variabili di ambiente che devono essere impostate per ogni tipo di autenticazione supportato dall'autenticazione basata su ambiente.</span><span class="sxs-lookup"><span data-stu-id="6d553-153">The following table details the environment variables that need to be set for each authentication type supported by environment-based authentication.</span></span>

| <span data-ttu-id="6d553-154">Tipo di autenticazione</span><span class="sxs-lookup"><span data-stu-id="6d553-154">Authentication type</span></span> | <span data-ttu-id="6d553-155">Variabile di ambiente</span><span class="sxs-lookup"><span data-stu-id="6d553-155">Environment variable</span></span> | <span data-ttu-id="6d553-156">DESCRIZIONE</span><span class="sxs-lookup"><span data-stu-id="6d553-156">Description</span></span> |
| ------------------- | -------------------- | ----------- |
| <span data-ttu-id="6d553-157">__Credenziali del client__</span><span class="sxs-lookup"><span data-stu-id="6d553-157">__Client credentials__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="6d553-158">ID del tenant di Active Directory a cui appartiene l'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="6d553-158">The ID for the Active Directory tenant that the service principal belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="6d553-159">Nome o ID dell'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="6d553-159">The name or ID of the service principal.</span></span> |
| | `AZURE_CLIENT_SECRET` | <span data-ttu-id="6d553-160">Segreto associato all'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="6d553-160">The secret associated with the service principal.</span></span> |
| <span data-ttu-id="6d553-161">__Certificate__</span><span class="sxs-lookup"><span data-stu-id="6d553-161">__Certificate__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="6d553-162">ID del tenant di Active Directory che viene registrato con il certificato.</span><span class="sxs-lookup"><span data-stu-id="6d553-162">The ID for the Active Directory tenant that the certificate is registered with.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="6d553-163">ID client applicazione associato al certificato.</span><span class="sxs-lookup"><span data-stu-id="6d553-163">The application client ID associated with the certificate.</span></span> |
| | `AZURE_CERTIFICATE_PATH` | <span data-ttu-id="6d553-164">Percorso verso il file di certificato client.</span><span class="sxs-lookup"><span data-stu-id="6d553-164">The path to the client certificate file.</span></span> |
| | `AZURE_CERTIFICATE_PASSWORD` | <span data-ttu-id="6d553-165">Password del certificato client.</span><span class="sxs-lookup"><span data-stu-id="6d553-165">The password for the client certificate.</span></span> |
| <span data-ttu-id="6d553-166">__Nome utente/password__</span><span class="sxs-lookup"><span data-stu-id="6d553-166">__Username/Password__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="6d553-167">ID del tenant di Active Directory a cui appartiene l'utente.</span><span class="sxs-lookup"><span data-stu-id="6d553-167">The ID for the Active Directory tenant that the user belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="6d553-168">ID client dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6d553-168">The application client ID.</span></span> |
| | `AZURE_USERNAME` | <span data-ttu-id="6d553-169">Nome utente con cui accedere.</span><span class="sxs-lookup"><span data-stu-id="6d553-169">The username to log in with.</span></span> |
| | `AZURE_PASSWORD` | <span data-ttu-id="6d553-170">Password con cui accedere.</span><span class="sxs-lookup"><span data-stu-id="6d553-170">The password to log in with.</span></span> |
| <span data-ttu-id="6d553-171">__Identità del servizio gestito__</span><span class="sxs-lookup"><span data-stu-id="6d553-171">__MSI__</span></span> | | <span data-ttu-id="6d553-172">L'Identità del servizio gestito non richiede la configurazione di credenziali.</span><span class="sxs-lookup"><span data-stu-id="6d553-172">MSI does not require any credentials to be set.</span></span> <span data-ttu-id="6d553-173">L'applicazione deve essere eseguita in una risorsa di Azure configurata per l'uso dell'Identità del servizio gestito.</span><span class="sxs-lookup"><span data-stu-id="6d553-173">The application must be running on an Azure resource configured to use MSI.</span></span> <span data-ttu-id="6d553-174">Per informazioni dettagliate, vedere [Identità del servizio gestito per le risorse di Azure].</span><span class="sxs-lookup"><span data-stu-id="6d553-174">For details, see [Managed Service Identity (MSI) for Azure resources].</span></span> |

<span data-ttu-id="6d553-175">Per connettersi a un endpoint di gestione o cloud diverso dal cloud pubblico di Azure, è possibile impostare anche le seguenti variabili di ambiente.</span><span class="sxs-lookup"><span data-stu-id="6d553-175">If you need to connect to a cloud or management endpoint other than the default Azure public cloud, you can also set the following environment variables.</span></span> <span data-ttu-id="6d553-176">I motivi più comuni per impostarle includono l'uso di Azure Stack, un cloud in un'area geografica diversa o il modello di distribuzione di Azure classico.</span><span class="sxs-lookup"><span data-stu-id="6d553-176">The most common reasons to set them are if you use Azure Stack, a cloud in a different geographic region, or the Azure Classic deployment model.</span></span>

| <span data-ttu-id="6d553-177">Variabile di ambiente</span><span class="sxs-lookup"><span data-stu-id="6d553-177">Environment variable</span></span> | <span data-ttu-id="6d553-178">DESCRIZIONE</span><span class="sxs-lookup"><span data-stu-id="6d553-178">Description</span></span>  |
|----------------------|--------------|
| `AZURE_ENVIRONMENT` | <span data-ttu-id="6d553-179">Nome dell'ambiente cloud a cui connettersi.</span><span class="sxs-lookup"><span data-stu-id="6d553-179">The name of the cloud environment to connect to.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="6d553-180">ID della risorsa di Active Directory da usare quando ci si connette.</span><span class="sxs-lookup"><span data-stu-id="6d553-180">The Active Directory resource ID to use when connecting.</span></span> <span data-ttu-id="6d553-181">Deve trattarsi di un URI che punta all'endpoint di gestione.</span><span class="sxs-lookup"><span data-stu-id="6d553-181">This should be a URI pointing to your management endpoint.</span></span> |

<span data-ttu-id="6d553-182">Quando si usa l'autenticazione basata su ambiente, chiamare la funzione [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) per ottenere l'oggetto provider di autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="6d553-182">When using environment-based authentication, call the [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) function to get your authorizer object.</span></span> <span data-ttu-id="6d553-183">Questo oggetto viene quindi impostato sulla proprietà `Authorizer` dei client per consentire loro l'accesso ad Azure.</span><span class="sxs-lookup"><span data-stu-id="6d553-183">This object is then set on the `Authorizer` property of clients to allow them access to Azure.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := auth.NewAuthorizerFromEnvironment()
```

## <a name="use-file-based-authentication"></a><span data-ttu-id="6d553-184">Usare l'autenticazione basata su file</span><span class="sxs-lookup"><span data-stu-id="6d553-184">Use file-based authentication</span></span>

<span data-ttu-id="6d553-185">L'autenticazione basata su file funziona solo con le credenziali del client quando vengono archiviate in un formato di file locale generato dall'[interfaccia della riga di comando di Azure 2.0](/cli/azure).</span><span class="sxs-lookup"><span data-stu-id="6d553-185">File-based authentication only works with client credentials when they are stored in a local file format generated by [the Azure CLI 2.0](/cli/azure).</span></span> <span data-ttu-id="6d553-186">È possibile creare facilmente questo file quando si crea una nuova entità servizio con il parametro `--sdk-auth`.</span><span class="sxs-lookup"><span data-stu-id="6d553-186">You can easily create this file when creating a new service principal with the `--sdk-auth` parameter.</span></span> <span data-ttu-id="6d553-187">Se si intende usare l'autenticazione basata su file, assicurarsi che questo argomento venga fornito quando si crea un'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="6d553-187">If you plan on using file-based authentication, make sure that this argument is provided when creating a service principal.</span></span> <span data-ttu-id="6d553-188">Poiché l'interfaccia della riga di comando stampa l'output in `stdout`, reindirizzare l'output verso un file.</span><span class="sxs-lookup"><span data-stu-id="6d553-188">Since the CLI prints output to `stdout`, redirect output to a file.</span></span>

```azurecli
az ad sp create-for-rbac --sdk-auth > azure.auth
```

<span data-ttu-id="6d553-189">Impostare la variabile di ambiente `AZURE_AUTH_LOCATION` in cui si trova il file di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="6d553-189">Set the `AZURE_AUTH_LOCATION` environment variable to where the authorization file is located.</span></span> <span data-ttu-id="6d553-190">Questa variabile di ambiente viene letta dall'applicazione e le credenziali contenute in essa vengono analizzate.</span><span class="sxs-lookup"><span data-stu-id="6d553-190">This environment variable is read by the application, and the credentials within it are parsed.</span></span> <span data-ttu-id="6d553-191">Se è necessario selezionare il file di autorizzazione in fase di runtime, modificare l'ambiente del programma tramite la funzione [os.Setenv](https://golang.org/pkg/os/#Setenv).</span><span class="sxs-lookup"><span data-stu-id="6d553-191">If you need to select the authorization file at runtime, manipulate the program's environment using the [os.Setenv](https://golang.org/pkg/os/#Setenv) function.</span></span>

<span data-ttu-id="6d553-192">Per caricare le informazioni di autenticazione, chiamare la funzione [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile).</span><span class="sxs-lookup"><span data-stu-id="6d553-192">To load the authentication information, call the [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile) function.</span></span> <span data-ttu-id="6d553-193">A differenza dell'autorizzazione basata su ambiente, l'autorizzazione basata su file richiede un endpoint di risorse.</span><span class="sxs-lookup"><span data-stu-id="6d553-193">Unlike environment-based authorization, file-based authorization requires a resource endpoint.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := NewAuthorizerFromFile(azure.PublicCloud.ResourceManagerEndpoint)
```

<span data-ttu-id="6d553-194">Per altre informazioni sull'uso delle entità servizio e sulla gestione delle relative autorizzazioni di accesso, vedere [Creare un'entità servizio con l'interfaccia della riga di comando di Azure 2.0].</span><span class="sxs-lookup"><span data-stu-id="6d553-194">For more on using service principals and managing their access permissions, see [Create a service principal with Azure CLI 2.0].</span></span>

## <a name="use-device-token-authentication"></a><span data-ttu-id="6d553-195">Uso dell'autenticazione tramite token dispositivo</span><span class="sxs-lookup"><span data-stu-id="6d553-195">Use device token authentication</span></span>

<span data-ttu-id="6d553-196">Perché gli utenti accedano in modo interattivo, il modo migliore per offrire tale funzionalità è l'autenticazione tramite token dispositivo.</span><span class="sxs-lookup"><span data-stu-id="6d553-196">If you want users to log in interactively, the best way to offer that capability is through device token authentication.</span></span> <span data-ttu-id="6d553-197">Questo flusso di autenticazione fornisce all'utente un token da incollare in un sito di accesso di Microsoft, in cui l'utente può quindi effettuare l'accesso con un account di Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="6d553-197">This authentication flow passes the user a token to paste into a Microsoft login site, where they then log in with an Azure Active Directory (AAD) account.</span></span> <span data-ttu-id="6d553-198">Questo metodo di autenticazione supporta gli account con autenticazione a più fattori abilitata, a differenza dell'autenticazione standard tramite nome utente/password.</span><span class="sxs-lookup"><span data-stu-id="6d553-198">This authentication method supports accounts that have multi-factor authentication enabled, unlike standard username/password authentication.</span></span>

<span data-ttu-id="6d553-199">Per usare l'autenticazione tramite token dispositivo, creare un provider di autorizzazioni [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) con la funzione [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig).</span><span class="sxs-lookup"><span data-stu-id="6d553-199">To use device token authentication, create a [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) authorizer with the [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) function.</span></span> <span data-ttu-id="6d553-200">Chiamare il [provider di autorizzazioni](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) nell'oggetto risultante per avviare il processo di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="6d553-200">Call [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) on the resulting object to start the authentication process.</span></span> <span data-ttu-id="6d553-201">L'autenticazione tramite flusso del dispositivo blocca l'esecuzione del programma fino a quando non è stato completato l'intero flusso di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="6d553-201">Device flow authentication blocks program execution until the whole authentication flow is complete.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
deviceConfig := auth.NewDeviceFlowConfig(applicationID, tenantID)
authorizer, err := deviceConfig.Authorizer()
```

## <a name="use-an-authentication-client"></a><span data-ttu-id="6d553-202">Usare un client di autenticazione</span><span class="sxs-lookup"><span data-stu-id="6d553-202">Use an authentication client</span></span>

<span data-ttu-id="6d553-203">Se è necessario un tipo di autenticazione specifico e si è disposti a far eseguire al programma il caricamento delle informazioni di autenticazione da parte dell'utente, è possibile usare qualsiasi client conforme all'interfaccia [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig).</span><span class="sxs-lookup"><span data-stu-id="6d553-203">If you require a specific type of authentication and are willing to have your program do the work to load authentication information from the user, you can use any client that conforms to the [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig) interface.</span></span> <span data-ttu-id="6d553-204">Usare un tipo che implementa questa interfaccia per disporre di un programma interattivo, quando si usano file di configurazione specializzati o è presente un requisito che impedisce di usare un altro metodo di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="6d553-204">Use a type that implements this interface when you want an interactive program, use specialized configuration files, or have a requirement that prevents you from using another authentication method.</span></span>

> [!WARNING]
> <span data-ttu-id="6d553-205">Mai impostare come hardcoded le credenziali di Azure in un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6d553-205">Never hard-code Azure credentials into an application.</span></span> <span data-ttu-id="6d553-206">L'inserimento di informazioni riservate in un file binario dell'applicazione rende più semplice per un utente malintenzionato estrarle, indipendentemente dal fatto che l'applicazione sia in esecuzione o meno.</span><span class="sxs-lookup"><span data-stu-id="6d553-206">Putting secrets into an application binary makes it easier for an attacker to extract them, whether the application is running or not.</span></span> <span data-ttu-id="6d553-207">In questo modo vengono messe a rischio tutte le risorse di Azure per cui sono autorizzate le credenziali!</span><span class="sxs-lookup"><span data-stu-id="6d553-207">This puts all Azure resources the credentials are authorized for at risk!</span></span>

<span data-ttu-id="6d553-208">Nella tabella seguente sono elencati i tipi conformi all'interfaccia `AuthorizerConfig` nell'SDK.</span><span class="sxs-lookup"><span data-stu-id="6d553-208">The following table lists the types in the SDK that conform to the `AuthorizerConfig` interface.</span></span>

| <span data-ttu-id="6d553-209">Tipo di autenticazione</span><span class="sxs-lookup"><span data-stu-id="6d553-209">Authentication type</span></span> | <span data-ttu-id="6d553-210">Tipo di provider di autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="6d553-210">Authorizer type</span></span> |
|---------------------|-----------------------|
| <span data-ttu-id="6d553-211">Autenticazione basata su certificati</span><span class="sxs-lookup"><span data-stu-id="6d553-211">Certificate-based authentication</span></span> | <span data-ttu-id="6d553-212">[ClientCertificateConfig]</span><span class="sxs-lookup"><span data-stu-id="6d553-212">[ClientCertificateConfig]</span></span> |
| <span data-ttu-id="6d553-213">Credenziali del client</span><span class="sxs-lookup"><span data-stu-id="6d553-213">Client credentials</span></span> | <span data-ttu-id="6d553-214">[ClientCredentialsConfig]</span><span class="sxs-lookup"><span data-stu-id="6d553-214">[ClientCredentialsConfig]</span></span> |
| <span data-ttu-id="6d553-215">Identità del servizio gestito</span><span class="sxs-lookup"><span data-stu-id="6d553-215">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="6d553-216">[MSIConfig]</span><span class="sxs-lookup"><span data-stu-id="6d553-216">[MSIConfig]</span></span> |
| <span data-ttu-id="6d553-217">Nome utente/password</span><span class="sxs-lookup"><span data-stu-id="6d553-217">Username/password</span></span> | <span data-ttu-id="6d553-218">[UsernamePasswordConfig]</span><span class="sxs-lookup"><span data-stu-id="6d553-218">[UsernamePasswordConfig]</span></span> |

[ClientCertificateConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCertificateConfig
[ClientCredentialsConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCredentialsConfig
[MSIConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#MSIConfig
[DeviceFlowConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig
[UsernamePasswordConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#UsernamePasswordConfig

<span data-ttu-id="6d553-223">Creare un autenticatore con la propria funzione `New` associata e quindi chiamare `Authorize` nell'oggetto risultante per eseguire l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="6d553-223">Create an authenticator with its associated `New` function, and then call `Authorize` on the resulting object to perform authentication.</span></span> <span data-ttu-id="6d553-224">Ad esempio, per usare l'autenticazione basata su certificati:</span><span class="sxs-lookup"><span data-stu-id="6d553-224">For example, to use certificate-based authentication:</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
certificateAuthorizer := auth.NewClientCertificateConfig(certificatePath, certificatePassword, clientID, tenantID)
authorizerToken, err := certificateAuthorizer.Authorize()
```
